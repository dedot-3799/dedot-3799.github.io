<!DOCTYPE html><title>Primality Tester Lite</title><p><h1>Primality Tester Lite</h1><input type="text" id="N"><button onclick="c()">Test</button><p id="R"><p id="T"><script>const c=()=>{let n=performance.now();R.textContent=BigInt(N.value)>2n**64n?"OverFlow.":BigInt(N.value)&&N.value?`${N.value} is ${p(N.value)?"":"not "}prime.`:"";T.textContent=`(${performance.now()-n}ms)`},p=n=>{if(n=BigInt(n),n<2n)return!1;if(n===2n||n===3n)return!0;if((n&1n)===0n)return!1;const r=[3n,5n,7n,11n,13n,17n,19n,23n,29n,31n,37n];for(let t=0;t<r.length;t++){const i=r[t];if(n===i)return!0;if(n%i===0n)return!1}const u=[2n,3n,5n,7n,11n,13n,17n,19n,23n,29n,31n,37n];let i=n-1n,f=0;while((i&1n)===0n)i>>=1n,f++;const t=new M(n);n:for(let r=0;r<u.length;r++){let e=u[r];if(!(e>=n)){let n=t.p(e,i);if(n!==t.o&&n!==t.O){for(let i=1;i<f;i++)if(n=t.m(n,n),n===t.O)continue n;return!1}}}return!0};class M{constructor(n){this.n=n;this.nBits=64n;this.R=1n<<this.nBits;this.l=this.I(n);this.R2=this.R*this.R%n;this.o=this.j(1n);this.O=this.j(n-1n)}j(n){return this.r(n*this.R2)}m(n,t){return this.r(n*t)}p(n,t){let i=this.j(n),r=this.o;while(t>0n)t&1n&&(r=this.m(r,i)),i=this.m(i,i),t>>=1n;return r}r(n){const i=n*this.l&this.R-1n,t=n+i*this.n>>this.nBits;return t>=this.n?t-this.n:t}I(n){let t=1n;for(let i=0;i<6;i++)t=t*(2n-n*t)&(1n<<2n**BigInt(i+1))-1n;return-t&this.R-1n}}</script>
